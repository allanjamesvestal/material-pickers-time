!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.TimePicker=i():t.TimePicker=i()}(this,function(){return function(t){function i(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}var e={};return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,e){"use strict";var n=e(1),l=function(t){return t&&t.__esModule?t:{default:t}}(n);window.onload=function(){var t=new l.default;console.log("test"),t.bindInput("#bind-one"),t.bindInput("#bind-two",{timeFormat:"military"})}},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),c=e(2),a=n(c),o=e(3),d=n(o),r=e(4),u=n(r);e(5);var h=function(){function t(){return l(this,t),this.template=a.default,this.defaultOptions={timeFormat:"standard",autoNext:!1},this.cachedEls={},this.events=new u.default,this.setupTemplate(),this.cachedEls.body=document.body,this.cachedEls.overlay=this.cachedEls.body.getElementsByClassName("mtp-overlay")[0],this.cachedEls.wrapper=this.cachedEls.overlay.getElementsByClassName("mtp-wrapper")[0],this.cachedEls.picker=this.cachedEls.wrapper.getElementsByClassName("mtp-picker")[0],this.cachedEls.meridiem=this.cachedEls.wrapper.getElementsByClassName("mtp-meridiem")[0],this.cachedEls.meridiemSpans=this.cachedEls.meridiem.getElementsByTagName("span"),this.cachedEls.displayHours=this.cachedEls.wrapper.getElementsByClassName("mtp-display__hours")[0],this.cachedEls.displayMinutes=this.cachedEls.wrapper.getElementsByClassName("mtp-display__minutes")[0],this.cachedEls.displayMeridiem=this.cachedEls.wrapper.getElementsByClassName("mtp-display__meridiem")[0],this.cachedEls.buttonCancel=this.cachedEls.picker.getElementsByClassName("mtp-actions__cancel")[0],this.cachedEls.buttonBack=this.cachedEls.picker.getElementsByClassName("mtp-actions__back")[0],this.cachedEls.buttonNext=this.cachedEls.picker.getElementsByClassName("mtp-actions__next")[0],this.cachedEls.buttonFinish=this.cachedEls.picker.getElementsByClassName("mtp-actions__finish")[0],this.cachedEls.clockHours=this.cachedEls.picker.getElementsByClassName("mtp-clock__hours")[0],this.cachedEls.clockMinutes=this.cachedEls.picker.getElementsByClassName("mtp-clock__minutes")[0],this.cachedEls.clockMilitaryHours=this.cachedEls.picker.getElementsByClassName("mtp-clock__hours-military")[0],this.cachedEls.clockHand=this.cachedEls.picker.getElementsByClassName("mtp-clock__hand")[0],this.cachedEls.clockHoursLi=this.cachedEls.clockHours.getElementsByTagName("li"),this.cachedEls.clockMinutesLi=this.cachedEls.clockMinutes.getElementsByTagName("li"),this.cachedEls.clockMilitaryHoursLi=this.cachedEls.clockMilitaryHours.getElementsByTagName("li"),this.setEvents(),this}return s(t,[{key:"bindInput",value:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t instanceof HTMLElement?t:document.querySelector(t);n.mtpOptions=(0,d.default)({},this.defaultOptions,e),n.addEventListener("focus",function(t){return i.showEvent(t)})}},{key:"openOnInput",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.inputEl=t instanceof HTMLElement?t:document.querySelector(t),this.inputEl.mtpOptions=(0,d.default)({},this.defaultOptions,i),this.show()}},{key:"setupTemplate",value:function(){this.isTemplateInDOM()||document.body.insertAdjacentHTML("beforeend",a.default)}},{key:"setEvents",value:function(){var t=this;this.hasSetEvents()||(this.cachedEls.overlay.addEventListener("click",function(i){return t.hideEvent(i)}),this.cachedEls.buttonCancel.addEventListener("click",function(i){return t.hideEvent(i)}),this.cachedEls.buttonNext.addEventListener("click",function(){return t.showMinutes()}),this.cachedEls.buttonBack.addEventListener("click",function(){return t.showHours()}),this.cachedEls.buttonFinish.addEventListener("click",function(){return t.finish()}),[].forEach.call(this.cachedEls.meridiemSpans,function(i){i.addEventListener("click",function(i){return t.meridiemSelectEvent(i)})}),[].forEach.call(this.cachedEls.clockHoursLi,function(i){i.addEventListener("click",function(i){t.hourSelectEvent(i,t.cachedEls.clockHours,t.cachedEls.clockHoursLi)})}),[].forEach.call(this.cachedEls.clockMilitaryHoursLi,function(i){i.addEventListener("click",function(i){t.hourSelectEvent(i,t.cachedEls.clockMilitaryHours,t.cachedEls.clockMilitaryHoursLi)})}),[].forEach.call(this.cachedEls.clockMinutesLi,function(i){i.addEventListener("click",function(i){t.minuteSelectEvent(i,t.cachedEls.clockMinutes,t.cachedEls.clockMinutesLi)})}),this.cachedEls.wrapper.classList.add("mtp-events-set"))}},{key:"show",value:function(){var t=this.isMilitaryFormat();this.inputEl.blur(),this.toggleHoursVisible(!0,t),this.toggleMinutesVisible(),this.setDisplayTime({hours:t?"00":"12",minutes:"0"}),this.cachedEls.body.style.overflow="hidden",this.cachedEls.displayMeridiem.style.display=t?"none":"inline",this.cachedEls.meridiem.style.display=t?"none":"block",this.cachedEls.overlay.style.display="block",this.cachedEls.clockHand.style.height=t?"90px":"105px",this.events.trigger("show")}},{key:"showEvent",value:function(t){this.inputEl=t.target,this.show()}},{key:"hide",value:function(){this.cachedEls.overlay.style.display="none",this.cachedEls.body.style.overflow="",this.inputEl.dispatchEvent(new Event("blur")),this.resetState(),this.events.trigger("hide")}},{key:"hideEvent",value:function(t){t.stopPropagation();var i=["mtp-overlay","mtp-actions__cancel"],e=t.target.classList;i.some(function(t){return e.contains(t)})&&this.hide()}},{key:"resetState",value:function(){this.currentStep=0,this.toggleHoursVisible(!0,this.isMilitaryFormat()),this.toggleMinutesVisible(),this.cachedEls.clockHoursLi[0].dispatchEvent(new Event("click")),this.cachedEls.clockMinutesLi[0].dispatchEvent(new Event("click")),this.cachedEls.clockMilitaryHoursLi[0].dispatchEvent(new Event("click")),this.cachedEls.meridiemSpans[0].dispatchEvent(new Event("click"))}},{key:"setDisplayTime",value:function(t){var i=t.hours,e=t.minutes;if(i&&(this.cachedEls.displayHours.innerHTML=i.trim()),e){var n=e<10?"0"+e:e;this.cachedEls.displayMinutes.innerHTML=n.trim()}}},{key:"rotateHand",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,e=t*i-180,n="rotate("+e+"deg)";this.cachedEls.clockHand.style.transform=n,this.cachedEls.clockHand.style["-webkit-transform"]=n,this.cachedEls.clockHand.style["-ms-transform"]=n}},{key:"showHours",value:function(){var t=this.isMilitaryFormat(),i=t?this.cachedEls.clockMilitaryHoursLi:this.cachedEls.clockHoursLi;this.toggleHoursVisible(!0,t),this.toggleMinutesVisible(),this.rotateHand(this.getActiveIndex(i))}},{key:"showMinutes",value:function(){var t=this.cachedEls.clockMinutesLi;this.toggleHoursVisible(),this.toggleMinutesVisible(!0),this.rotateHand(this.getActiveIndex(t),6),this.cachedEls.clockHand.style.height="115px"}},{key:"finish",value:function(){this.timeSelected(),this.hide()}},{key:"toggleHoursVisible",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cachedEls.clockHours.style.display=t&&!i?"block":"none",this.cachedEls.clockMilitaryHours.style.display=t&&i?"block":"none",this.cachedEls.buttonNext.style.display=t?"none":"inline-block"}},{key:"toggleMinutesVisible",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cachedEls.clockMinutes.style.display=t?"block":"none",this.cachedEls.buttonBack.style.display=t?"inline-block":"none",this.cachedEls.buttonNext.style.display=t?"none":"inline-block",this.cachedEls.buttonFinish.style.display=t?"inline-block":"none"}},{key:"getActiveIndex",value:function(t){var i=0;return[].some.call(t,function(t,e){return!!t.classList.contains("mtp-clock--active")&&(i=e,!0)}),i}},{key:"timeSelected",value:function(){var t=this.cachedEls.displayHours.innerHTML,i=this.cachedEls.displayMinutes.innerHTML,e=this.isMilitaryFormat()?"":this.cachedEls.displayMeridiem.innerHTML,n=t+":"+i+" "+e;this.inputEl.value=n.trim(),this.inputEl.dispatchEvent(new Event("input"))}},{key:"setActiveEl",value:function(t,i){t.getElementsByClassName("mtp-clock--active")[0].classList.remove("mtp-clock--active"),i.classList.add("mtp-clock--active")}},{key:"meridiemSelectEvent",value:function(t){var i=t.target,e=this.cachedEls.meridiem.getElementsByClassName("mtp-clock--active")[0],n=i.innerHTML;e.isEqualNode(i)||(e.classList.remove("mtp-clock--active"),i.classList.add("mtp-clock--active"),this.cachedEls.displayMeridiem.innerHTML=n)}},{key:"hourSelectEvent",value:function(t,i,e){t.stopPropagation();var n=t.target,l=n.parentElement,s=l.classList.contains("mtp-clock__hours--inner");this.cachedEls.clockHand.style.height=s?"90px":"105px",this.setActiveEl(i,n);var c=this.getActiveIndex(e);this.setDisplayTime({hours:n.innerHTML}),this.rotateHand(c),this.events.trigger("hourSelected")}},{key:"minuteSelectEvent",value:function(t,i,e){t.stopPropagation();var n=t.target;this.setActiveEl(i,n);var l=this.getActiveIndex(e),s=l;this.setDisplayTime({minutes:s}),this.rotateHand(l,6),this.events.trigger("minuteSelected")}},{key:"isMilitaryFormat",value:function(){return Boolean("military"===this.inputEl.mtpOptions.timeFormat)}},{key:"hasSetEvents",value:function(){return this.cachedEls.wrapper.classList.contains("mtp-events-set")}},{key:"isTemplateInDOM",value:function(){return Boolean(document.getElementsByClassName("mtp-overlay")[0])}}]),t}();i.default=h},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default='\n<div class="mtp-overlay" style="display:none">\n    <div class="mtp-wrapper">\n        <div class="mtp-display">\n            <span class="mtp-display__hours">12</span>:\n            <span class="mtp-display__minutes">00</span>\n            <span class="mtp-display__meridiem">am</span>\n        </div>\x3c!-- END .mtp-display --\x3e\n        <div class="mtp-picker">\n            <div class="mtp-meridiem">\n                <span class="mtp-clock--active">am</span>\n                <span>pm</span>\n            </div>\x3c!-- END .mtp-meridiem --\x3e\n            <div class="mtp-clock">\n                <div class="mtp-clock__center"></div>\n                <div class="mtp-clock__hand"></div>\n                <ul class="mtp-clock__time mtp-clock__outer mtp-clock__hours" style="display:none">\n                    <li class="mtp-clock--active">12</li>\n                    <li>1</li>\n                    <li>2</li>\n                    <li>3</li>\n                    <li>4</li>\n                    <li>5</li>\n                    <li>6</li>\n                    <li>7</li>\n                    <li>8</li>\n                    <li>9</li>\n                    <li>10</li>\n                    <li>11</li>\n                </ul>\n                <ul class="mtp-clock__time mtp-clock__outer mtp-clock__minutes" style="display:none">\n                    <li class="mtp-clock--active">0</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>5</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>10</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>15</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>20</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>25</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>30</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>35</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>40</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>45</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>50</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>55</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                    <li>&middot;</li>\n                </ul>\n                <ul class="mtp-clock__time mtp-clock__hours-military" style="display:none">\n                    <div class="mtp-clock__hours--inner">\n                        <li class="mtp-clock--active">00</li>\n                        <li>13</li>\n                        <li>14</li>\n                        <li>15</li>\n                        <li>16</li>\n                        <li>17</li>\n                        <li>18</li>\n                        <li>19</li>\n                        <li>20</li>\n                        <li>21</li>\n                        <li>22</li>\n                        <li>23</li>\n                    </div>\n                    <div class="mtp-clock__hours">\n                        <li>12</li>\n                        <li>1</li>\n                        <li>2</li>\n                        <li>3</li>\n                        <li>4</li>\n                        <li>5</li>\n                        <li>6</li>\n                        <li>7</li>\n                        <li>8</li>\n                        <li>9</li>\n                        <li>10</li>\n                        <li>11</li>\n                    </div>\n                </ul>\n            </div>\x3c!-- END .mtp-clock --\x3e\n            <div class="mtp-actions">\n                <button type="button" class="mtp-actions__button mtp-actions__cancel">Cancel</button>\n                <button type="button" class="mtp-actions__button mtp-actions__back" style="display:none">Back</button>\n                <button type="button" class="mtp-actions__button mtp-actions__next">Next</button>\n                <button type="button" class="mtp-actions__button mtp-actions__finish" style="display:none">Done</button>\n            </div>\x3c!-- END .mtp-actions --\x3e\n        </div>\x3c!-- END .mtp-picker --\x3e\n    </div>\x3c!-- END .mtp-wrapper --\x3e\n</div>\x3c!-- END .mtp-overlay --\x3e\n'},function(t,i,e){"use strict";function n(t){if("undefined"===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var i=Object(t),e=0;e<(arguments.length<=1?0:arguments.length-1);e+=1){var n=arguments.length<=e+1?void 0:arguments[e+1];if("undefined"!==n&&null!==n){n=Object(n);for(var l=Object.keys(n),s=0,c=l.length;s<c;s+=1){var a=l[s],o=Object.getOwnPropertyDescriptor(n,a);"undefined"!==o&&o.enumerable&&(i[a]=n[a])}}}return i}Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},function(t,i,e){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),s=function(){function t(){n(this,t),this.events={}}return l(t,[{key:"on",value:function(t,i){this.events[t]||(this.events[t]=[]),this.events[t].push(i)}},{key:"off",value:function(t){this.events[t]&&(this.events[t]=[])}},{key:"trigger",value:function(t,i){this.events[t]&&this.events[t].length&&this.events[t].forEach(function(t){return t(i)})}}]),t}();i.default=s},function(t,i){}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9UaW1lUGlja2VyLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2YzI5ZGFiMDExMWYzNTRjMjA4ZCIsIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3RpbWVwaWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3RlbXBsYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2V2ZW50cy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX3RpbWVwaWNrZXIiLCJfdGltZXBpY2tlcjIiLCJvYmoiLCJkZWZhdWx0Iiwid2luZG93Iiwib25sb2FkIiwicGlja2VyIiwiY29uc29sZSIsImxvZyIsImJpbmRJbnB1dCIsInRpbWVGb3JtYXQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3RlbXBsYXRlIiwiX3RlbXBsYXRlMiIsIl9hc3NpZ24iLCJfYXNzaWduMiIsIl9ldmVudHMiLCJfZXZlbnRzMiIsIlRpbWVQaWNrZXIiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRPcHRpb25zIiwiYXV0b05leHQiLCJjYWNoZWRFbHMiLCJldmVudHMiLCJzZXR1cFRlbXBsYXRlIiwiYm9keSIsImRvY3VtZW50Iiwib3ZlcmxheSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ3cmFwcGVyIiwibWVyaWRpZW0iLCJtZXJpZGllbVNwYW5zIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJkaXNwbGF5SG91cnMiLCJkaXNwbGF5TWludXRlcyIsImRpc3BsYXlNZXJpZGllbSIsImJ1dHRvbkNhbmNlbCIsImJ1dHRvbkJhY2siLCJidXR0b25OZXh0IiwiYnV0dG9uRmluaXNoIiwiY2xvY2tIb3VycyIsImNsb2NrTWludXRlcyIsImNsb2NrTWlsaXRhcnlIb3VycyIsImNsb2NrSGFuZCIsImNsb2NrSG91cnNMaSIsImNsb2NrTWludXRlc0xpIiwiY2xvY2tNaWxpdGFyeUhvdXJzTGkiLCJzZXRFdmVudHMiLCJpbnB1dEVsIiwiX3RoaXMiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiZWxlbWVudCIsIkhUTUxFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm10cE9wdGlvbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJzaG93RXZlbnQiLCJzaG93IiwiaXNUZW1wbGF0ZUluRE9NIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiX3RoaXMyIiwiaGFzU2V0RXZlbnRzIiwiaGlkZUV2ZW50Iiwic2hvd01pbnV0ZXMiLCJzaG93SG91cnMiLCJmaW5pc2giLCJmb3JFYWNoIiwic3BhbiIsIm1lcmlkaWVtU2VsZWN0RXZlbnQiLCJob3VyIiwiaG91clNlbGVjdEV2ZW50IiwibWludXRlIiwibWludXRlU2VsZWN0RXZlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc01pbGl0YXJ5Rm9ybWF0IiwiYmx1ciIsInRvZ2dsZUhvdXJzVmlzaWJsZSIsInRvZ2dsZU1pbnV0ZXNWaXNpYmxlIiwic2V0RGlzcGxheVRpbWUiLCJob3VycyIsIm1pbnV0ZXMiLCJzdHlsZSIsIm92ZXJmbG93IiwiZGlzcGxheSIsImhlaWdodCIsInRyaWdnZXIiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJyZXNldFN0YXRlIiwic3RvcFByb3BhZ2F0aW9uIiwiYWxsb3dlZENsYXNzZXMiLCJzb21lIiwiYWxsb3dlZENsYXNzIiwiY29udGFpbnMiLCJoaWRlIiwiY3VycmVudFN0ZXAiLCJfcmVmIiwiaW5uZXJIVE1MIiwidHJpbSIsIm1pbiIsIm5vZGVJbmRleCIsImluY3JlbWVudCIsInJvdGF0ZURlZyIsInN0eWxlVmFsIiwidHJhbnNmb3JtIiwiaG91ckVscyIsInJvdGF0ZUhhbmQiLCJnZXRBY3RpdmVJbmRleCIsIm1pbnV0ZUVscyIsInRpbWVTZWxlY3RlZCIsImlzVmlzaWJsZSIsInRpbWVFbHMiLCJhY3RpdmVJbmRleCIsInRpbWVFbCIsImluZGV4IiwidGltZVZhbHVlIiwiY29udGFpbmVyRWwiLCJhY3RpdmVFbCIsInJlbW92ZSIsImN1cnJlbnRBY3RpdmUiLCJpc0VxdWFsTm9kZSIsImxpc3RFbHMiLCJuZXdBY3RpdmUiLCJwYXJlbnRFbCIsInBhcmVudEVsZW1lbnQiLCJpc0lubmVyIiwic2V0QWN0aXZlRWwiLCJkaXNwbGF5VGltZSIsIkJvb2xlYW4iLCJhc3NpZ24iLCJ0byIsImluYyIsIm5leHRTb3VyY2UiLCJrZXlzQXJyYXkiLCJrZXlzIiwibmV4dEluZGV4IiwibGVuIiwibmV4dEtleSIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJFdmVudHMiLCJoYW5kbGVyIiwicHVzaCIsInBhcmFtcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFB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T0FBT0MsZUFBZStCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVIsRUFBYVcsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSixFQUFZbEIsVUFBVzZCLEdBQWlCQyxHQUFhUixFQUFpQkosRUFBYVksR0FBcUJaLE1NM3dCM2dCaUosRU5veEJSLFdBQ1QsUUFBU0EsS0FDTG5KLEVBQWdCdkMsS0FBTTBMLEdBRXRCMUwsS012eEJKaUUsVU4rMEJBLE1BckRBckIsR0FBYThJLElBQ1R2SSxJQUFLLEtBVUxSLE1BQU8sU001eEJSeUQsRUFBT3VGLEdBQ0QzTCxLQUFLaUUsT0FBT21DLEtBQ2JwRyxLQUFLaUUsT0FBT21DLE9BR2hCcEcsS0FBS2lFLE9BQU9tQyxHQUFPd0YsS0FBS0QsTU51eUJ4QnhJLElBQUssTUFDTFIsTUFBTyxTTS94QlB5RCxHQUNJcEcsS0FBS2lFLE9BQU9tQyxLQUNacEcsS0FBS2lFLE9BQU9tQyxVTjR5QmhCakQsSUFBSyxVQUNMUixNQUFPLFNNbHlCSHlELEVBQU95RixHQUNQN0wsS0FBS2lFLE9BQU9tQyxJQUFVcEcsS0FBS2lFLE9BQU9tQyxHQUFPcEQsUUFDekNoRCxLQUFLaUUsT0FBT21DLEdBQU9XLFFBQVEsU0FBQTRFLEdBQUEsTUFBV0EsR0FBUUUsU055eUIvQ0gsSUFHWDlMLEdBQVFrQyxRTW4xQmE0SixHTnUxQmYsU0FBVTdMLEVBQVFEIiwiZmlsZSI6IlRpbWVQaWNrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJUaW1lUGlja2VyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlRpbWVQaWNrZXJcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiVGltZVBpY2tlclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJUaW1lUGlja2VyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3RpbWVwaWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3RpbWVwaWNrZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGltZXBpY2tlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBpY2tlciA9IG5ldyBfdGltZXBpY2tlcjIuZGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKCd0ZXN0Jyk7XG5cbiAgICBwaWNrZXIuYmluZElucHV0KCcjYmluZC1vbmUnKTtcbiAgICBwaWNrZXIuYmluZElucHV0KCcjYmluZC10d28nLCB7IHRpbWVGb3JtYXQ6ICdtaWxpdGFyeScgfSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3RlbXBsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF90ZW1wbGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZW1wbGF0ZSk7XG5cbnZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTtcblxudmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcbiAqIEBjbGFzcyBUaW1lUGlja2VyXG4gKlxuICogQHByb3Age3N0cmluZ30gdGVtcGxhdGUgLSBUaW1lUGlja2VyIHRlbXBsYXRlXG4gKiBAcHJvcCB7b2JqZWN0fSBkZWZhdWx0T3B0aW9ucyAtIERlZmF1bHQgY29uZmlnIG9wdGlvbnNcbiAqIEBwcm9wIHtzdHJpbmd9IGRlZmF1bHRPcHRpb25zLnRpbWVGb3JtYXQgLSAxMiBvciAyNCBob3VyIGZvcm1hdCBbJ3N0YW5kYXJkJywgJ21pbGl0YXJ5J11cbiAqIEBwcm9wIHtib29sfSBkZWZhdWx0T3B0aW9ucy5hdXRvTmV4dCAtIEF1dG8tbmV4dCBvbiB0aW1lIGVsZW1lbnQgc2VsZWN0XG4gKiBAcHJvcCB7b2JqZWN0fSBjYWNoZWRFbHMgLSBDYWNoZWQgZWxlbWVudHMgaW4gdGVtcGxhdGVcbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmJvZHkgLSBkb2N1bWVudC5ib2R5XG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5vdmVybGF5IC0gT3ZlcmxheSBlbGVtZW50ICgnLm10cC1vdmVybGF5JylbMF1cbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLndyYXBwZXIgLSBXcmFwcGVyIGVsZW1lbnQgKCcubXRwLXdyYXBwZXInKVswXVxuICogQHByb3Age0hUTUxFbGVtZW50fSBjYWNoZWRFbHMucGlja2VyIC0gU2VsZWN0aW9uIGVsZW1lbnRzIHdyYXBwZXIgKCcubXRwLXBpY2tlcicpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5tZXJpZGllbSAtIE1lcmlkaWVtIHNlbGVjdGlvbiBlbGVtZW50cyB3cmFwcGVyICgnLm10cC1tZXJpZGllbScpWzBdXG4gKiBAcHJvcCB7SFRNTENvbGxlY3Rpb259IGNhY2hlZEVscy5tZXJpZGllbVNwYW5zIC0gTWVyaWRpZW0gc2VsZWN0aW9uIGVsZW1lbnRzIG1lcmlkaWVtKCdzcGFuJylcbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmRpc3BsYXlIb3VycyAtIFNlbGVjdGVkIGhvdXIgZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19ob3VycycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5kaXNwbGF5TWludXRlcyAtIFNlbGVjdGVkIG1pbnV0ZXMgZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19taW51dGVzJylbMF1cbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmRpc3BsYXlNZXJkaWVtIC0gU2VsZWN0ZWQgbWVyaWRpZW0gZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19tZXJpZGllbScpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25DYW5jZWwgLSBDYW5jZWwgYnV0dG9uIGVsZW1lbnQgKCcubXRwLWFjdGlvbnNfX2NhbmNlbCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25CYWNrIC0gQmFjayBidXR0b24gZWxlbWVudCAoJy5tdHAtYWN0aW9uc19fYmFjaycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25OZXh0IC0gTmV4dCBidXR0b24gZWxlbWVudCAoJy5tdHAtYWN0aW9uc19fbmV4dCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25GaW5pc2ggLSBGaW5pc2ggYnV0dG9uIGVsZW1lbnQgKCcubXRwLWFjdGlvbnNfX2ZpbmlzaCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja0hvdXJzIC0gSG91ciBlbGVtZW50cyBkaXNwbGF5IHdyYXBwZXIgKCcubXRwLWNsb2NrX19ob3VycycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja01pbnV0ZXMgLSBNaW51dGUgZWxlbWVudHMgZGlzcGxheSB3cmFwcGVyICgnLm10cC1jbG9ja19fbWludXRlcycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnMgLSBNaWxpdGFyeSBob3VyIGVsZW1lbnRzIGRpc3BsYXkgd3JhcHBlciAoJy5tdHBfY2xvY2tfX2hvdXJzLS1taWxpdGFyeScpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja0hhbmQgLSBDbG9jayBoYW5kIGRpc3BsYXkgKCcubXRwLWNsb2NrX19oYW5kJylbMF1cbiAqIEBwcm9wIHtIVE1MQ29sbGVjdGlvbn0gY2FjaGVkRWxzLmNsb2NrSG91cnNMaSAtIEhvdXIgbGlzdCBlbGVtZW50cyBjbG9ja0hvdXJzKCdsaScpXG4gKiBAcHJvcCB7SFRNTENvbGxlY3Rpb259IGNhY2hlZEVscy5jbG9ja01pbnV0ZXNMaSAtIE1pbnV0ZSBsaXN0IGVsZW1lbnRzIGNsb2NrTWludXRlcygnbGknKVxuICogQHByb3Age0hUTUxDb2xsZWN0aW9ufSBjYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzTGkgLSBNaWxpdGFyIEhvdXIgbGkgZWxlbWVudHMgY2xvY2tNaWxpdGFyeUhvdXJzKCdsaScpXG4gKi9cbnZhciBUaW1lUGlja2VyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBuZXcgVGltZVBpY2tlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHJldHVybiB7VGltZVBpY2tlcn0gTmV3IFRpbWVQaWNrZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaW1lUGlja2VyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZVBpY2tlcik7XG5cbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IF90ZW1wbGF0ZTIuZGVmYXVsdDtcbiAgICAgICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHRpbWVGb3JtYXQ6ICdzdGFuZGFyZCcsXG4gICAgICAgICAgICBhdXRvTmV4dDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMgPSB7fTtcblxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBfZXZlbnRzMi5kZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5zZXR1cFRlbXBsYXRlKCk7XG5cbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkgPSB0aGlzLmNhY2hlZEVscy5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1vdmVybGF5JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLndyYXBwZXIgPSB0aGlzLmNhY2hlZEVscy5vdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC13cmFwcGVyJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLnBpY2tlciA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLXBpY2tlcicpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5tZXJpZGllbSA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLW1lcmlkaWVtJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLm1lcmlkaWVtU3BhbnMgPSB0aGlzLmNhY2hlZEVscy5tZXJpZGllbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5kaXNwbGF5SG91cnMgPSB0aGlzLmNhY2hlZEVscy53cmFwcGVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1kaXNwbGF5X19ob3VycycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5kaXNwbGF5TWludXRlcyA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWRpc3BsYXlfX21pbnV0ZXMnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheU1lcmlkaWVtID0gdGhpcy5jYWNoZWRFbHMud3JhcHBlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtZGlzcGxheV9fbWVyaWRpZW0nKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQ2FuY2VsID0gdGhpcy5jYWNoZWRFbHMucGlja2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1hY3Rpb25zX19jYW5jZWwnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQmFjayA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtYWN0aW9uc19fYmFjaycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25OZXh0ID0gdGhpcy5jYWNoZWRFbHMucGlja2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1hY3Rpb25zX19uZXh0JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbkZpbmlzaCA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtYWN0aW9uc19fZmluaXNoJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSG91cnMgPSB0aGlzLmNhY2hlZEVscy5waWNrZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWNsb2NrX19ob3VycycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMgPSB0aGlzLmNhY2hlZEVscy5waWNrZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWNsb2NrX19taW51dGVzJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3VycyA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtY2xvY2tfX2hvdXJzLW1pbGl0YXJ5JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZCA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtY2xvY2tfX2hhbmQnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vyc0xpID0gdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vycy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGknKTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tNaW51dGVzTGkgPSB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpJyk7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3Vyc0xpID0gdGhpcy5jYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpO1xuXG4gICAgICAgIHRoaXMuc2V0RXZlbnRzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZCBldmVudCB0byB0aGUgaW5wdXQgZWxlbWVudCB0byBvcGVuIHdoZW4gYGZvY3VzYCBldmVudCBpcyBldmVudHMudHJpZ2dlcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MRWxlbWVudH0gaW5wdXRFbCBTZWxlY3RvciBlbGVtZW50IHRvIGJlIHF1ZXJpZWQgb3IgZXhpc3RpbmcgSFRNTEVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIG1lcmdlZCB3aXRoIGRlZmF1bHRzIGFuZCBzZXQgdG8gaW5wdXQgZWxlbWVudCBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoVGltZVBpY2tlciwgW3tcbiAgICAgICAga2V5OiAnYmluZElucHV0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRJbnB1dChpbnB1dEVsKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gaW5wdXRFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID8gaW5wdXRFbCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRFbCk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQubXRwT3B0aW9ucyA9ICgwLCBfYXNzaWduMi5kZWZhdWx0KSh7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNob3dFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcGVuIHBpY2tlciB3aXRoIHRoZSBpbnB1dCBwcm92aWRlZCBpbiBjb250ZXh0IHdpdGhvdXQgYmluZGluZyBldmVudHNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8SFRNTEVsZW1lbnR9IGlucHV0RWwgU2VsZWN0b3IgZWxlbWVudCB0byBiZSBxdWVyaWVkIG9yIGV4aXN0aW5nIEhUTUxFbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgdG8gbWVyZ2VkIHdpdGggZGVmYXVsdHMgYW5kIHNldCB0byBpbnB1dCBlbGVtZW50IG9iamVjdFxuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb3Blbk9uSW5wdXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbk9uSW5wdXQoaW5wdXRFbCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgPyBpbnB1dEVsIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbnB1dEVsKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbC5tdHBPcHRpb25zID0gKDAsIF9hc3NpZ24yLmRlZmF1bHQpKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHVwIHRoZSB0ZW1wbGF0ZSBpbiBET00gaWYgbm90IGFscmVhZHlcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldHVwVGVtcGxhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBUZW1wbGF0ZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1RlbXBsYXRlSW5ET00oKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBfdGVtcGxhdGUyLmRlZmF1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgZXZlbnRzIG9uIHBpY2tlciBlbGVtZW50c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RXZlbnRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEV2ZW50cygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzU2V0RXZlbnRzKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBjbG9zZVxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5oaWRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGlkZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25OZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnNob3dNaW51dGVzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5zaG93SG91cnMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25GaW5pc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBtZXJpZGllbSBzZWxlY3QgZXZlbnRzXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRoaXMuY2FjaGVkRWxzLm1lcmlkaWVtU3BhbnMsIGZ1bmN0aW9uIChzcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIubWVyaWRpZW1TZWxlY3RFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gdGltZSBzZWxlY3QgZXZlbnRzXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRoaXMuY2FjaGVkRWxzLmNsb2NrSG91cnNMaSwgZnVuY3Rpb24gKGhvdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG91ci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmhvdXJTZWxlY3RFdmVudChldmVudCwgX3RoaXMyLmNhY2hlZEVscy5jbG9ja0hvdXJzLCBfdGhpczIuY2FjaGVkRWxzLmNsb2NrSG91cnNMaSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnNMaSwgZnVuY3Rpb24gKGhvdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG91ci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmhvdXJTZWxlY3RFdmVudChldmVudCwgX3RoaXMyLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnMsIF90aGlzMi5jYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzTGkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwodGhpcy5jYWNoZWRFbHMuY2xvY2tNaW51dGVzTGksIGZ1bmN0aW9uIChtaW51dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWludXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIubWludXRlU2VsZWN0RXZlbnQoZXZlbnQsIF90aGlzMi5jYWNoZWRFbHMuY2xvY2tNaW51dGVzLCBfdGhpczIuY2FjaGVkRWxzLmNsb2NrTWludXRlc0xpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZEVscy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ210cC1ldmVudHMtc2V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyB0aGUgcGlja2VyIGluIHRoZSBET01cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3cnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgIHZhciBpc01pbGl0YXJ5Rm9ybWF0ID0gdGhpcy5pc01pbGl0YXJ5Rm9ybWF0KCk7XG5cbiAgICAgICAgICAgIC8vIGJsdXIgaW5wdXQgdG8gcHJldmVudCBvbnNjcmVlbiBrZXlib2FyZCBmcm9tIGRpc3BsYXlpbmcgKG1vYmlsZSBoYWNrKVxuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLmJsdXIoKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlSG91cnNWaXNpYmxlKHRydWUsIGlzTWlsaXRhcnlGb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVNaW51dGVzVmlzaWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5VGltZSh7XG4gICAgICAgICAgICAgICAgaG91cnM6IGlzTWlsaXRhcnlGb3JtYXQgPyAnMDAnIDogJzEyJyxcbiAgICAgICAgICAgICAgICBtaW51dGVzOiAnMCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5kaXNwbGF5TWVyaWRpZW0uc3R5bGUuZGlzcGxheSA9IGlzTWlsaXRhcnlGb3JtYXQgPyAnbm9uZScgOiAnaW5saW5lJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLm1lcmlkaWVtLnN0eWxlLmRpc3BsYXkgPSBpc01pbGl0YXJ5Rm9ybWF0ID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hhbmQuc3R5bGUuaGVpZ2h0ID0gaXNNaWxpdGFyeUZvcm1hdCA/ICc5MHB4JyA6ICcxMDVweCc7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoJ3Nob3cnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGUgZm9yIGlucHV0IGZvY3VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lclxuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2hvd0V2ZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dFdmVudChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSGlkZSB0aGUgcGlja2VyIGluIHRoZSBET01cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hpZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcblxuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdibHVyJykpO1xuICAgICAgICAgICAgdGhpcy5yZXNldFN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdoaWRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSGlkZSB0aGUgcGlja2VyIGVsZW1lbnQgb24gdGhlIHBhZ2VcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRXZlbnQgb2JqZWN0IHBhc3NlZCBmcm9tIGV2ZW50IGxpc3RlbmVyIGNhbGxiYWNrXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoaWRlRXZlbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgLy8gb25seSBhbGxvdyBldmVudCBiYXNlZCBjbG9zZSBpZiBldmVudC50YXJnZXQgY29udGFpbnMgb25lIG9mIHRoZXNlIGNsYXNzZXNcbiAgICAgICAgICAgIC8vIGhhY2sgdG8gcHJldmVudCBvdmVybGF5IGNsb3NlIGV2ZW50IGZyb20gZXZlbnRzLnRyaWdnZXJpbmcgb24gYWxsIGVsZW1lbnRzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIHRoZXkgYXJlIGNoaWxkcmVuIG9mIG92ZXJsYXlcbiAgICAgICAgICAgIHZhciBhbGxvd2VkQ2xhc3NlcyA9IFsnbXRwLW92ZXJsYXknLCAnbXRwLWFjdGlvbnNfX2NhbmNlbCddO1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICB2YXIgaXNBbGxvd2VkID0gYWxsb3dlZENsYXNzZXMuc29tZShmdW5jdGlvbiAoYWxsb3dlZENsYXNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzTGlzdC5jb250YWlucyhhbGxvd2VkQ2xhc3MpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChpc0FsbG93ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNldCBwaWNrZXIgc3RhdGUgdG8gZGVmYXVsdHNcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Jlc2V0U3RhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSAwO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVIb3Vyc1Zpc2libGUodHJ1ZSwgdGhpcy5pc01pbGl0YXJ5Rm9ybWF0KCkpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVNaW51dGVzVmlzaWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vyc0xpWzBdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjbGljaycpKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWludXRlc0xpWzBdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjbGljaycpKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3Vyc0xpWzBdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjbGljaycpKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLm1lcmlkaWVtU3BhbnNbMF0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NsaWNrJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgZGlzcGxheWVkIHRpbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBmaWxsIGlucHV0IHZhbHVlIG9uIGNvbXBsZXRldGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaG91cnM6IEhvdXIgZGlzcGxheSB0aW1lLCBtaW51dGVzOiBNaW51dGUgZGlzcGxheSB0aW1lXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXREaXNwbGF5VGltZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREaXNwbGF5VGltZShfcmVmKSB7XG4gICAgICAgICAgICB2YXIgaG91cnMgPSBfcmVmLmhvdXJzLFxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBfcmVmLm1pbnV0ZXM7XG5cbiAgICAgICAgICAgIGlmIChob3Vycykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlIb3Vycy5pbm5lckhUTUwgPSBob3Vycy50cmltKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtaW51dGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pbiA9IG1pbnV0ZXMgPCAxMCA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheU1pbnV0ZXMuaW5uZXJIVE1MID0gbWluLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb3RhdGUgdGhlIGhhbmQgZWxlbWVudCB0byBzZWxlY3RlZCB0aW1lXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbm9kZUluZGV4IEluZGV4IG9mIGFjdGl2ZSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gaW5jcmVtZW50IERlZ3JlZSBpbmNyZW1lbnQgZWxlbWVudHMgYXJlIG9uXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyb3RhdGVIYW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJvdGF0ZUhhbmQoKSB7XG4gICAgICAgICAgICB2YXIgbm9kZUluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiA5O1xuICAgICAgICAgICAgdmFyIGluY3JlbWVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMzA7XG5cbiAgICAgICAgICAgIC8vIDAgaW5kZXggaXMgMTgwIGRlZ3Jlc3MgYmVoaW5kIDAgZGVnXG4gICAgICAgICAgICB2YXIgcm90YXRlRGVnID0gbm9kZUluZGV4ICogaW5jcmVtZW50IC0gMTgwO1xuICAgICAgICAgICAgdmFyIHN0eWxlVmFsID0gJ3JvdGF0ZSgnICsgcm90YXRlRGVnICsgJ2RlZyknO1xuXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hhbmQuc3R5bGUudHJhbnNmb3JtID0gc3R5bGVWYWw7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hhbmQuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzdHlsZVZhbDtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZC5zdHlsZVsnLW1zLXRyYW5zZm9ybSddID0gc3R5bGVWYWw7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3dIb3VycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93SG91cnMoKSB7XG4gICAgICAgICAgICB2YXIgaXNNaWxpdGFyeUZvcm1hdCA9IHRoaXMuaXNNaWxpdGFyeUZvcm1hdCgpO1xuICAgICAgICAgICAgdmFyIGhvdXJFbHMgPSBpc01pbGl0YXJ5Rm9ybWF0ID8gdGhpcy5jYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzTGkgOiB0aGlzLmNhY2hlZEVscy5jbG9ja0hvdXJzTGk7XG5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlSG91cnNWaXNpYmxlKHRydWUsIGlzTWlsaXRhcnlGb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVNaW51dGVzVmlzaWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVIYW5kKHRoaXMuZ2V0QWN0aXZlSW5kZXgoaG91ckVscykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzaG93TWludXRlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93TWludXRlcygpIHtcbiAgICAgICAgICAgIHZhciBtaW51dGVFbHMgPSB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXNMaTtcblxuICAgICAgICAgICAgdGhpcy50b2dnbGVIb3Vyc1Zpc2libGUoKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTWludXRlc1Zpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUhhbmQodGhpcy5nZXRBY3RpdmVJbmRleChtaW51dGVFbHMpLCA2KTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZC5zdHlsZS5oZWlnaHQgPSAnMTE1cHgnO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaW5pc2gnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluaXNoKCkge1xuICAgICAgICAgICAgdGhpcy50aW1lU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvZ2dsZSBob3VyIChib3RoIG1pbGl0YXJ5IGFuZCBzdGFuZGFyZCkgY2xvY2sgdmlzaWJsaXR5IGluIERPTVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmlzaWJsZSBJcyBjbG9jayBmYWNlIHRvZ2dsZWQgdmlzaWJsZSBvciBoaWRkZW5cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc01pbGl0YXJ5Rm9ybWF0IElzIHVzaW5nIG1pbGl0YXJ5IGhvdXIgZm9ybWF0XG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2dnbGVIb3Vyc1Zpc2libGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlSG91cnNWaXNpYmxlKCkge1xuICAgICAgICAgICAgdmFyIGlzVmlzaWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgICAgICAgICB2YXIgaXNNaWxpdGFyeUZvcm1hdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSG91cnMuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSAmJiAhaXNNaWxpdGFyeUZvcm1hdCA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnMuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSAmJiBpc01pbGl0YXJ5Rm9ybWF0ID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbk5leHQuc3R5bGUuZGlzcGxheSA9ICFpc1Zpc2libGUgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2dnbGUgbWludXRlIGNsb2NrIHZpc2libGl0eSBpbiBET01cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc1Zpc2libGUgSXMgY2xvY2sgZmFjZSB0b2dnbGVkIHZpc2libGUgb3IgaGlkZGVuXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2dnbGVNaW51dGVzVmlzaWJsZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVNaW51dGVzVmlzaWJsZSgpIHtcbiAgICAgICAgICAgIHZhciBpc1Zpc2libGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25CYWNrLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbk5leHQuc3R5bGUuZGlzcGxheSA9ICFpc1Zpc2libGUgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbkZpbmlzaC5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IHRoZSBhY3RpdmUgdGltZSBlbGVtZW50IGluZGV4XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTENvbGxlY3Rpb259IHRpbWVFbHMgQ29sbGVjdGlvbiBvZiB0aW1lIGVsZW1lbnRzIHRvIGZpbmQgYWN0aXZlIGluXG4gICAgICAgICAqIEByZXR1cm4ge2ludGVnZXJ9IEFjdGl2ZSBlbGVtZW50IGluZGV4XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRBY3RpdmVJbmRleCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY3RpdmVJbmRleCh0aW1lRWxzKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlSW5kZXggPSAwO1xuXG4gICAgICAgICAgICBbXS5zb21lLmNhbGwodGltZUVscywgZnVuY3Rpb24gKHRpbWVFbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGltZUVsLmNsYXNzTGlzdC5jb250YWlucygnbXRwLWNsb2NrLS1hY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJbmRleCA9IGluZGV4O1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlSW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHNlbGVjdGVkIHRpbWUgdG8gaW5wdXQgZWxlbWVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndGltZVNlbGVjdGVkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVTZWxlY3RlZCgpIHtcbiAgICAgICAgICAgIHZhciBob3VycyA9IHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlIb3Vycy5pbm5lckhUTUw7XG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlNaW51dGVzLmlubmVySFRNTDtcbiAgICAgICAgICAgIHZhciBtZXJpZGllbSA9IHRoaXMuaXNNaWxpdGFyeUZvcm1hdCgpID8gJycgOiB0aGlzLmNhY2hlZEVscy5kaXNwbGF5TWVyaWRpZW0uaW5uZXJIVE1MO1xuICAgICAgICAgICAgdmFyIHRpbWVWYWx1ZSA9IGhvdXJzICsgJzonICsgbWludXRlcyArICcgJyArIG1lcmlkaWVtO1xuXG4gICAgICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSB0aW1lVmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYWN0aXZlIGNsb2NrIGZhY2UgZWxlbWVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lckVsIE5ldyBhY3RpdmUgZWxlbWVudHMgLnBhcmVudE5vZGVcbiAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBhY3RpdmVFbCBFbGVtZW50IHRvIHNldCBhY3RpdmVcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEFjdGl2ZUVsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZUVsKGNvbnRhaW5lckVsLCBhY3RpdmVFbCkge1xuICAgICAgICAgICAgdmFyIGFjdGl2ZUNsYXNzTmFtZSA9ICdtdHAtY2xvY2stLWFjdGl2ZSc7XG4gICAgICAgICAgICB2YXIgY3VycmVudEFjdGl2ZSA9IGNvbnRhaW5lckVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYWN0aXZlQ2xhc3NOYW1lKVswXTtcblxuICAgICAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICBhY3RpdmVFbC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWVyaWRpZW0gc2VsZWN0IGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtFdmVuZXR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lclxuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbWVyaWRpZW1TZWxlY3RFdmVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJpZGllbVNlbGVjdEV2ZW50KGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlQ2xhc3NOYW1lID0gJ210cC1jbG9jay0tYWN0aXZlJztcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRBY3RpdmUgPSB0aGlzLmNhY2hlZEVscy5tZXJpZGllbS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGFjdGl2ZUNsYXNzTmFtZSlbMF07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LmlubmVySFRNTDtcblxuICAgICAgICAgICAgaWYgKCFjdXJyZW50QWN0aXZlLmlzRXF1YWxOb2RlKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheU1lcmlkaWVtLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvdXIgc2VsZWN0IGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRXZlbnQgb2JqZWN0IHBhc3NlZCBmcm9tIGxpc3RlbmVyXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lckVsIEVsZW1lbnQgY29udGFpbmluZyB0aW1lIGxpc3QgZWxlbWVudHNcbiAgICAgICAgICogQHBhcmFtIHtIVE1MQ29sbGVjdGlvbn0gbGlzdEVscyBDb2xsZWN0aW9uIG9mIGxpc3QgZWxlbWVudHNcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hvdXJTZWxlY3RFdmVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBob3VyU2VsZWN0RXZlbnQoZXZlbnQsIGNvbnRhaW5lckVsLCBsaXN0RWxzKSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgdmFyIG5ld0FjdGl2ZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHZhciBwYXJlbnRFbCA9IG5ld0FjdGl2ZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGlzSW5uZXIgPSBwYXJlbnRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ210cC1jbG9ja19faG91cnMtLWlubmVyJyk7XG5cbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZC5zdHlsZS5oZWlnaHQgPSBpc0lubmVyID8gJzkwcHgnIDogJzEwNXB4JztcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWwoY29udGFpbmVyRWwsIG5ld0FjdGl2ZSk7XG5cbiAgICAgICAgICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0QWN0aXZlSW5kZXgobGlzdEVscyk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheVRpbWUoeyBob3VyczogbmV3QWN0aXZlLmlubmVySFRNTCB9KTtcbiAgICAgICAgICAgIHRoaXMucm90YXRlSGFuZChhY3RpdmVJbmRleCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdob3VyU2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb3VyIHNlbGVjdCBldmVudCBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lclxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXJFbCBFbGVtZW50IGNvbnRhaW5pbmcgdGltZSBsaXN0IGVsZW1lbnRzXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTENvbGxlY3Rpb259IGxpc3RFbHMgQ29sbGVjdGlvbiBvZiBsaXN0IGVsZW1lbnRzXG4gICAgICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtaW51dGVTZWxlY3RFdmVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtaW51dGVTZWxlY3RFdmVudChldmVudCwgY29udGFpbmVyRWwsIGxpc3RFbHMpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICB2YXIgbmV3QWN0aXZlID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsKGNvbnRhaW5lckVsLCBuZXdBY3RpdmUpO1xuXG4gICAgICAgICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEFjdGl2ZUluZGV4KGxpc3RFbHMpO1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlUaW1lID0gYWN0aXZlSW5kZXg7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheVRpbWUoeyBtaW51dGVzOiBkaXNwbGF5VGltZSB9KTtcbiAgICAgICAgICAgIHRoaXMucm90YXRlSGFuZChhY3RpdmVJbmRleCwgNik7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdtaW51dGVTZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIHBpY2tlciBzZXQgdG8gbWlsaXRhcnkgdGltZSBtb2RlXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGluIG1pbGl0YXJ5IHRpbWUgbW9kZVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaXNNaWxpdGFyeUZvcm1hdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc01pbGl0YXJ5Rm9ybWF0KCkge1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pbnB1dEVsLm10cE9wdGlvbnMudGltZUZvcm1hdCA9PT0gJ21pbGl0YXJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgcGlja2VyIG9iamVjdCBoYXMgYWxyZWFkeSBzZXQgZXZlbnRzIG9uIHBpY2tlciBlbGVtZW50c1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgZXZlbnRzIGJlZW4gc2V0IG9uIHBpY2tlciBlbGVtZW50c1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFzU2V0RXZlbnRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1NldEV2ZW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEVscy53cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygnbXRwLWV2ZW50cy1zZXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiB0ZW1wbGF0ZSBoYXMgYWxyZWFkeSBiZWVuIGFwcGVuZGVkIHRvIERPTVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0ZW1wbGF0ZSBpbiBET01cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2lzVGVtcGxhdGVJbkRPTScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RlbXBsYXRlSW5ET00oKSB7XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtb3ZlcmxheScpWzBdKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUaW1lUGlja2VyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUaW1lUGlja2VyO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHRlbXBsYXRlID0gXCJcXG48ZGl2IGNsYXNzPVxcXCJtdHAtb3ZlcmxheVxcXCIgc3R5bGU9XFxcImRpc3BsYXk6bm9uZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm10cC13cmFwcGVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm10cC1kaXNwbGF5XFxcIj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwibXRwLWRpc3BsYXlfX2hvdXJzXFxcIj4xMjwvc3Bhbj46XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm10cC1kaXNwbGF5X19taW51dGVzXFxcIj4wMDwvc3Bhbj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwibXRwLWRpc3BsYXlfX21lcmlkaWVtXFxcIj5hbTwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PjwhLS0gRU5EIC5tdHAtZGlzcGxheSAtLT5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm10cC1waWNrZXJcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm10cC1tZXJpZGllbVxcXCI+XFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJtdHAtY2xvY2stLWFjdGl2ZVxcXCI+YW08L3NwYW4+XFxuICAgICAgICAgICAgICAgIDxzcGFuPnBtPC9zcGFuPlxcbiAgICAgICAgICAgIDwvZGl2PjwhLS0gRU5EIC5tdHAtbWVyaWRpZW0gLS0+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibXRwLWNsb2NrXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibXRwLWNsb2NrX19jZW50ZXJcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtdHAtY2xvY2tfX2hhbmRcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XFxcIm10cC1jbG9ja19fdGltZSBtdHAtY2xvY2tfX291dGVyIG10cC1jbG9ja19faG91cnNcXFwiIHN0eWxlPVxcXCJkaXNwbGF5Om5vbmVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJtdHAtY2xvY2stLWFjdGl2ZVxcXCI+MTI8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjE8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjI8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjM8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjQ8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjU8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjY8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjc8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjg8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjk8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjEwPC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4xMTwvbGk+XFxuICAgICAgICAgICAgICAgIDwvdWw+XFxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwibXRwLWNsb2NrX190aW1lIG10cC1jbG9ja19fb3V0ZXIgbXRwLWNsb2NrX19taW51dGVzXFxcIiBzdHlsZT1cXFwiZGlzcGxheTpub25lXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwibXRwLWNsb2NrLS1hY3RpdmVcXFwiPjA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT41PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+MTA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4xNTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjIwPC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+MjU8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4zMDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjM1PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+NDA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT40NTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPjUwPC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+NTU8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPiZtaWRkb3Q7PC9saT5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJtdHAtY2xvY2tfX3RpbWUgbXRwLWNsb2NrX19ob3Vycy1taWxpdGFyeVxcXCIgc3R5bGU9XFxcImRpc3BsYXk6bm9uZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtdHAtY2xvY2tfX2hvdXJzLS1pbm5lclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJtdHAtY2xvY2stLWFjdGl2ZVxcXCI+MDA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xMzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjE0PC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTU8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xNjwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjE3PC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTg8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xOTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjIwPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MjE8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4yMjwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjIzPC9saT5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibXRwLWNsb2NrX19ob3Vyc1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjEyPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjI8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4zPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+NDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjU8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT42PC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+NzwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjg8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT45PC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xMTwvbGk+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICA8L2Rpdj48IS0tIEVORCAubXRwLWNsb2NrIC0tPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm10cC1hY3Rpb25zXFxcIj5cXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtdHAtYWN0aW9uc19fYnV0dG9uIG10cC1hY3Rpb25zX19jYW5jZWxcXFwiPkNhbmNlbDwvYnV0dG9uPlxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm10cC1hY3Rpb25zX19idXR0b24gbXRwLWFjdGlvbnNfX2JhY2tcXFwiIHN0eWxlPVxcXCJkaXNwbGF5Om5vbmVcXFwiPkJhY2s8L2J1dHRvbj5cXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJtdHAtYWN0aW9uc19fYnV0dG9uIG10cC1hY3Rpb25zX19uZXh0XFxcIj5OZXh0PC9idXR0b24+XFxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwibXRwLWFjdGlvbnNfX2J1dHRvbiBtdHAtYWN0aW9uc19fZmluaXNoXFxcIiBzdHlsZT1cXFwiZGlzcGxheTpub25lXFxcIj5Eb25lPC9idXR0b24+XFxuICAgICAgICAgICAgPC9kaXY+PCEtLSBFTkQgLm10cC1hY3Rpb25zIC0tPlxcbiAgICAgICAgPC9kaXY+PCEtLSBFTkQgLm10cC1waWNrZXIgLS0+XFxuICAgIDwvZGl2PjwhLS0gRU5EIC5tdHAtd3JhcHBlciAtLT5cXG48L2Rpdj48IS0tIEVORCAubXRwLW92ZXJsYXkgLS0+XFxuXCI7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHRlbXBsYXRlO1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiBPYmplY3QuYXNzaWduIHBvbHlmaWxsXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHRhcmdldCBUYXJnZXQgb2JqZWN0IHRvIG1lcmdlIHByb3BlcnRpZXMgb250b1xuICogQHBhcmFtIHsuLi5vYmplY3R9IHNvdXJjZXMgIFNvdXJjZSBvYmplY3QgdG8gbWVyZ2UgcHJvcGVydGllcyBmcm9tXG4gKiBAcmV0dXJuIHtvYmplY3R9IFRhcmdldCBvYmplY3Qgd2l0aCBtZXJnZWQgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldCA9PT0gJ3VuZGVmaW5lZCcgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGZpcnN0IGFyZ3VtZW50IHRvIG9iamVjdCcpO1xuICAgIH1cblxuICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuXG4gICAgZm9yICh2YXIgaW5jID0gMDsgaW5jIDwgKGFyZ3VtZW50cy5sZW5ndGggPD0gMSA/IDAgOiBhcmd1bWVudHMubGVuZ3RoIC0gMSk7IGluYyArPSAxKSB7XG4gICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzLmxlbmd0aCA8PSBpbmMgKyAxID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2luYyArIDFdO1xuXG4gICAgICAgIGlmIChuZXh0U291cmNlID09PSAndW5kZWZpbmVkJyB8fCBuZXh0U291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5leHRTb3VyY2UgPSBPYmplY3QobmV4dFNvdXJjZSk7XG5cbiAgICAgICAgdmFyIGtleXNBcnJheSA9IE9iamVjdC5rZXlzKG5leHRTb3VyY2UpO1xuXG4gICAgICAgIGZvciAodmFyIG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4ICs9IDEpIHtcbiAgICAgICAgICAgIHZhciBuZXh0S2V5ID0ga2V5c0FycmF5W25leHRJbmRleF07XG4gICAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSwgbmV4dEtleSk7XG5cbiAgICAgICAgICAgIGlmIChkZXNjICE9PSAndW5kZWZpbmVkJyAmJiBkZXNjLmVudW1lcmFibGUpIHtcbiAgICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG87XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGFzc2lnbjtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBAY2xhc3MgRXZlbnRzXG4gKlxuICogQHByb3Age29iamVjdH0gZXZlbnRzIC0gSGFzaCB0YWJsZSBvZiBldmVudHMgYW5kIHRoZWlyIGFzc2lnbmVkIGhhbmRsZXIgY2FsbGJhY2tzXG4gKi9cbnZhciBFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXZlbnRzKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRzKTtcblxuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhFdmVudHMsIFt7XG4gICAgICAgIGtleTogXCJvblwiLFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBoYW5kbGVyIG9uIGV2ZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWUgdG8gc2V0IGhhbmRsZXIgdG9cbiAgICAgICAgICogQHBhcmFtIHtmdW5jfSBoYW5kbGVyIC0gSGFuZGxlciBmdW5jdGlvbiBjYWxsYmFja1xuICAgICAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBnaXZlbiBldmVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lIHRvIHJlbW92ZSBoYW5kbGVyIGZyb21cbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvZmZcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9mZihldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzW2V2ZW50XSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXIgZXZlbnQgd2l0aCBwYXJhbXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdG8gdHJpZ2dlclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zIC0gUGFyYW1ldGVycyB0byBwYXNzIHRvIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ0cmlnZ2VyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50c1tldmVudF0gJiYgdGhpcy5ldmVudHNbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRXZlbnRzO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFdmVudHM7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gVGltZVBpY2tlci5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDZjMjlkYWIwMTExZjM1NGMyMDhkIiwiaW1wb3J0IFRpbWVQaWNrZXIgZnJvbSAnLi90aW1lcGlja2VyJztcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBjb25zdCBwaWNrZXIgPSBuZXcgVGltZVBpY2tlcigpO1xuICAgIGNvbnNvbGUubG9nKCd0ZXN0JylcblxuICAgIHBpY2tlci5iaW5kSW5wdXQoJyNiaW5kLW9uZScpO1xuICAgIHBpY2tlci5iaW5kSW5wdXQoJyNiaW5kLXR3bycsIHt0aW1lRm9ybWF0OiAnbWlsaXRhcnknfSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL2luZGV4LmpzIiwiaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGUnO1xuaW1wb3J0IGFzc2lnbiBmcm9tICcuL2Fzc2lnbic7XG5pbXBvcnQgRXZlbnRzIGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCAnLi4vc2Fzcy9tYWluLnNjc3MnO1xuXG4vKipcbiAqIEBjbGFzcyBUaW1lUGlja2VyXG4gKlxuICogQHByb3Age3N0cmluZ30gdGVtcGxhdGUgLSBUaW1lUGlja2VyIHRlbXBsYXRlXG4gKiBAcHJvcCB7b2JqZWN0fSBkZWZhdWx0T3B0aW9ucyAtIERlZmF1bHQgY29uZmlnIG9wdGlvbnNcbiAqIEBwcm9wIHtzdHJpbmd9IGRlZmF1bHRPcHRpb25zLnRpbWVGb3JtYXQgLSAxMiBvciAyNCBob3VyIGZvcm1hdCBbJ3N0YW5kYXJkJywgJ21pbGl0YXJ5J11cbiAqIEBwcm9wIHtib29sfSBkZWZhdWx0T3B0aW9ucy5hdXRvTmV4dCAtIEF1dG8tbmV4dCBvbiB0aW1lIGVsZW1lbnQgc2VsZWN0XG4gKiBAcHJvcCB7b2JqZWN0fSBjYWNoZWRFbHMgLSBDYWNoZWQgZWxlbWVudHMgaW4gdGVtcGxhdGVcbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmJvZHkgLSBkb2N1bWVudC5ib2R5XG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5vdmVybGF5IC0gT3ZlcmxheSBlbGVtZW50ICgnLm10cC1vdmVybGF5JylbMF1cbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLndyYXBwZXIgLSBXcmFwcGVyIGVsZW1lbnQgKCcubXRwLXdyYXBwZXInKVswXVxuICogQHByb3Age0hUTUxFbGVtZW50fSBjYWNoZWRFbHMucGlja2VyIC0gU2VsZWN0aW9uIGVsZW1lbnRzIHdyYXBwZXIgKCcubXRwLXBpY2tlcicpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5tZXJpZGllbSAtIE1lcmlkaWVtIHNlbGVjdGlvbiBlbGVtZW50cyB3cmFwcGVyICgnLm10cC1tZXJpZGllbScpWzBdXG4gKiBAcHJvcCB7SFRNTENvbGxlY3Rpb259IGNhY2hlZEVscy5tZXJpZGllbVNwYW5zIC0gTWVyaWRpZW0gc2VsZWN0aW9uIGVsZW1lbnRzIG1lcmlkaWVtKCdzcGFuJylcbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmRpc3BsYXlIb3VycyAtIFNlbGVjdGVkIGhvdXIgZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19ob3VycycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5kaXNwbGF5TWludXRlcyAtIFNlbGVjdGVkIG1pbnV0ZXMgZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19taW51dGVzJylbMF1cbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gY2FjaGVkRWxzLmRpc3BsYXlNZXJkaWVtIC0gU2VsZWN0ZWQgbWVyaWRpZW0gZGlzcGxheSBlbGVtZW50ICgnLm10cC1kaXNwbGF5X19tZXJpZGllbScpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25DYW5jZWwgLSBDYW5jZWwgYnV0dG9uIGVsZW1lbnQgKCcubXRwLWFjdGlvbnNfX2NhbmNlbCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25CYWNrIC0gQmFjayBidXR0b24gZWxlbWVudCAoJy5tdHAtYWN0aW9uc19fYmFjaycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25OZXh0IC0gTmV4dCBidXR0b24gZWxlbWVudCAoJy5tdHAtYWN0aW9uc19fbmV4dCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5idXR0b25GaW5pc2ggLSBGaW5pc2ggYnV0dG9uIGVsZW1lbnQgKCcubXRwLWFjdGlvbnNfX2ZpbmlzaCcpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja0hvdXJzIC0gSG91ciBlbGVtZW50cyBkaXNwbGF5IHdyYXBwZXIgKCcubXRwLWNsb2NrX19ob3VycycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja01pbnV0ZXMgLSBNaW51dGUgZWxlbWVudHMgZGlzcGxheSB3cmFwcGVyICgnLm10cC1jbG9ja19fbWludXRlcycpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnMgLSBNaWxpdGFyeSBob3VyIGVsZW1lbnRzIGRpc3BsYXkgd3JhcHBlciAoJy5tdHBfY2xvY2tfX2hvdXJzLS1taWxpdGFyeScpWzBdXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IGNhY2hlZEVscy5jbG9ja0hhbmQgLSBDbG9jayBoYW5kIGRpc3BsYXkgKCcubXRwLWNsb2NrX19oYW5kJylbMF1cbiAqIEBwcm9wIHtIVE1MQ29sbGVjdGlvbn0gY2FjaGVkRWxzLmNsb2NrSG91cnNMaSAtIEhvdXIgbGlzdCBlbGVtZW50cyBjbG9ja0hvdXJzKCdsaScpXG4gKiBAcHJvcCB7SFRNTENvbGxlY3Rpb259IGNhY2hlZEVscy5jbG9ja01pbnV0ZXNMaSAtIE1pbnV0ZSBsaXN0IGVsZW1lbnRzIGNsb2NrTWludXRlcygnbGknKVxuICogQHByb3Age0hUTUxDb2xsZWN0aW9ufSBjYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzTGkgLSBNaWxpdGFyIEhvdXIgbGkgZWxlbWVudHMgY2xvY2tNaWxpdGFyeUhvdXJzKCdsaScpXG4gKi9cbmNsYXNzIFRpbWVQaWNrZXIge1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIHRpbWVGb3JtYXQ6ICdzdGFuZGFyZCcsXG4gICAgICAgIGF1dG9OZXh0OiBmYWxzZSxcbiAgICB9O1xuICAgIGNhY2hlZEVscyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBuZXcgVGltZVBpY2tlciBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHJldHVybiB7VGltZVBpY2tlcn0gTmV3IFRpbWVQaWNrZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG5cbiAgICAgICAgdGhpcy5zZXR1cFRlbXBsYXRlKCk7XG5cbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkgPSB0aGlzLmNhY2hlZEVscy5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1vdmVybGF5JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLndyYXBwZXIgPSB0aGlzLmNhY2hlZEVscy5vdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC13cmFwcGVyJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLnBpY2tlciA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLXBpY2tlcicpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5tZXJpZGllbSA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLW1lcmlkaWVtJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLm1lcmlkaWVtU3BhbnMgPSB0aGlzLmNhY2hlZEVscy5tZXJpZGllbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5kaXNwbGF5SG91cnMgPSB0aGlzLmNhY2hlZEVscy53cmFwcGVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1kaXNwbGF5X19ob3VycycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5kaXNwbGF5TWludXRlcyA9IHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWRpc3BsYXlfX21pbnV0ZXMnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheU1lcmlkaWVtID0gdGhpcy5jYWNoZWRFbHMud3JhcHBlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtZGlzcGxheV9fbWVyaWRpZW0nKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQ2FuY2VsID0gdGhpcy5jYWNoZWRFbHMucGlja2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1hY3Rpb25zX19jYW5jZWwnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQmFjayA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtYWN0aW9uc19fYmFjaycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25OZXh0ID0gdGhpcy5jYWNoZWRFbHMucGlja2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ210cC1hY3Rpb25zX19uZXh0JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbkZpbmlzaCA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtYWN0aW9uc19fZmluaXNoJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSG91cnMgPSB0aGlzLmNhY2hlZEVscy5waWNrZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWNsb2NrX19ob3VycycpWzBdO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMgPSB0aGlzLmNhY2hlZEVscy5waWNrZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXRwLWNsb2NrX19taW51dGVzJylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3VycyA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtY2xvY2tfX2hvdXJzLW1pbGl0YXJ5JylbMF07XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZCA9IHRoaXMuY2FjaGVkRWxzLnBpY2tlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtY2xvY2tfX2hhbmQnKVswXTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vyc0xpID0gdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vycy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGknKTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tNaW51dGVzTGkgPSB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpJyk7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3Vyc0xpID0gdGhpcy5jYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpO1xuXG4gICAgICAgIHRoaXMuc2V0RXZlbnRzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZCBldmVudCB0byB0aGUgaW5wdXQgZWxlbWVudCB0byBvcGVuIHdoZW4gYGZvY3VzYCBldmVudCBpcyBldmVudHMudHJpZ2dlcmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MRWxlbWVudH0gaW5wdXRFbCBTZWxlY3RvciBlbGVtZW50IHRvIGJlIHF1ZXJpZWQgb3IgZXhpc3RpbmcgSFRNTEVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIG1lcmdlZCB3aXRoIGRlZmF1bHRzIGFuZCBzZXQgdG8gaW5wdXQgZWxlbWVudCBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGJpbmRJbnB1dChpbnB1dEVsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGlucHV0RWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/IGlucHV0RWwgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlucHV0RWwpO1xuXG4gICAgICAgIGVsZW1lbnQubXRwT3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBldmVudCA9PiB0aGlzLnNob3dFdmVudChldmVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW4gcGlja2VyIHdpdGggdGhlIGlucHV0IHByb3ZpZGVkIGluIGNvbnRleHQgd2l0aG91dCBiaW5kaW5nIGV2ZW50c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8SFRNTEVsZW1lbnR9IGlucHV0RWwgU2VsZWN0b3IgZWxlbWVudCB0byBiZSBxdWVyaWVkIG9yIGV4aXN0aW5nIEhUTUxFbGVtZW50XG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB0byBtZXJnZWQgd2l0aCBkZWZhdWx0cyBhbmQgc2V0IHRvIGlucHV0IGVsZW1lbnQgb2JqZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBvcGVuT25JbnB1dChpbnB1dEVsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5pbnB1dEVsID0gaW5wdXRFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID8gaW5wdXRFbCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5tdHBPcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdGhlIHRlbXBsYXRlIGluIERPTSBpZiBub3QgYWxyZWFkeVxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBzZXR1cFRlbXBsYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNUZW1wbGF0ZUluRE9NKCkpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0ZW1wbGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGV2ZW50cyBvbiBwaWNrZXIgZWxlbWVudHNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgc2V0RXZlbnRzKCkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzU2V0RXZlbnRzKCkpIHtcbiAgICAgICAgICAgIC8vIGNsb3NlXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEVscy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5oaWRlRXZlbnQoZXZlbnQpKTtcblxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5oaWRlRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbk5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNob3dNaW51dGVzKCkpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uQmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd0hvdXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uRmluaXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5maW5pc2goKSk7XG5cbiAgICAgICAgICAgIC8vIG1lcmlkaWVtIHNlbGVjdCBldmVudHNcbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmNhY2hlZEVscy5tZXJpZGllbVNwYW5zLCBzcGFuID0+IHtcbiAgICAgICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5tZXJpZGllbVNlbGVjdEV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdGltZSBzZWxlY3QgZXZlbnRzXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwodGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vyc0xpLCBob3VyID0+IHtcbiAgICAgICAgICAgICAgICBob3VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdXJTZWxlY3RFdmVudChldmVudCwgdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3VycywgdGhpcy5jYWNoZWRFbHMuY2xvY2tIb3Vyc0xpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3Vyc0xpLCBob3VyID0+IHtcbiAgICAgICAgICAgICAgICBob3VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdXJTZWxlY3RFdmVudChldmVudCwgdGhpcy5jYWNoZWRFbHMuY2xvY2tNaWxpdGFyeUhvdXJzLCB0aGlzLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnNMaSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXNMaSwgbWludXRlID0+IHtcbiAgICAgICAgICAgICAgICBtaW51dGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWludXRlU2VsZWN0RXZlbnQoZXZlbnQsIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWludXRlcywgdGhpcy5jYWNoZWRFbHMuY2xvY2tNaW51dGVzTGkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbXRwLWV2ZW50cy1zZXQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgdGhlIHBpY2tlciBpbiB0aGUgRE9NXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHNob3coKSB7XG4gICAgICAgIGNvbnN0IGlzTWlsaXRhcnlGb3JtYXQgPSB0aGlzLmlzTWlsaXRhcnlGb3JtYXQoKTtcblxuICAgICAgICAvLyBibHVyIGlucHV0IHRvIHByZXZlbnQgb25zY3JlZW4ga2V5Ym9hcmQgZnJvbSBkaXNwbGF5aW5nIChtb2JpbGUgaGFjaylcbiAgICAgICAgdGhpcy5pbnB1dEVsLmJsdXIoKTtcbiAgICAgICAgdGhpcy50b2dnbGVIb3Vyc1Zpc2libGUodHJ1ZSwgaXNNaWxpdGFyeUZvcm1hdCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTWludXRlc1Zpc2libGUoKTtcbiAgICAgICAgdGhpcy5zZXREaXNwbGF5VGltZSh7XG4gICAgICAgICAgICBob3VyczogaXNNaWxpdGFyeUZvcm1hdCA/ICcwMCcgOiAnMTInLFxuICAgICAgICAgICAgbWludXRlczogJzAnLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNhY2hlZEVscy5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlNZXJpZGllbS5zdHlsZS5kaXNwbGF5ID0gaXNNaWxpdGFyeUZvcm1hdCA/ICdub25lJyA6ICdpbmxpbmUnO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5tZXJpZGllbS5zdHlsZS5kaXNwbGF5ID0gaXNNaWxpdGFyeUZvcm1hdCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLm92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrSGFuZC5zdHlsZS5oZWlnaHQgPSBpc01pbGl0YXJ5Rm9ybWF0ID8gJzkwcHgnIDogJzEwNXB4JztcblxuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdzaG93Jyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlIGZvciBpbnB1dCBmb2N1c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRXZlbnQgb2JqZWN0IHBhc3NlZCBmcm9tIGxpc3RlbmVyXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBzaG93RXZlbnQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5pbnB1dEVsID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBwaWNrZXIgaW4gdGhlIERPTVxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcblxuICAgICAgICB0aGlzLmlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2JsdXInKSk7XG4gICAgICAgIHRoaXMucmVzZXRTdGF0ZSgpO1xuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgcGlja2VyIGVsZW1lbnQgb24gdGhlIHBhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBldmVudCBsaXN0ZW5lciBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgaGlkZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIG9ubHkgYWxsb3cgZXZlbnQgYmFzZWQgY2xvc2UgaWYgZXZlbnQudGFyZ2V0IGNvbnRhaW5zIG9uZSBvZiB0aGVzZSBjbGFzc2VzXG4gICAgICAgIC8vIGhhY2sgdG8gcHJldmVudCBvdmVybGF5IGNsb3NlIGV2ZW50IGZyb20gZXZlbnRzLnRyaWdnZXJpbmcgb24gYWxsIGVsZW1lbnRzIGJlY2F1c2VcbiAgICAgICAgLy8gdGhleSBhcmUgY2hpbGRyZW4gb2Ygb3ZlcmxheVxuICAgICAgICBjb25zdCBhbGxvd2VkQ2xhc3NlcyA9IFsnbXRwLW92ZXJsYXknLCAnbXRwLWFjdGlvbnNfX2NhbmNlbCddO1xuICAgICAgICBjb25zdCBjbGFzc0xpc3QgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0O1xuICAgICAgICBjb25zdCBpc0FsbG93ZWQgPSBhbGxvd2VkQ2xhc3Nlcy5zb21lKGFsbG93ZWRDbGFzcyA9PiBjbGFzc0xpc3QuY29udGFpbnMoYWxsb3dlZENsYXNzKSk7XG5cbiAgICAgICAgaWYgKGlzQWxsb3dlZCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBwaWNrZXIgc3RhdGUgdG8gZGVmYXVsdHNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgcmVzZXRTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IDA7XG4gICAgICAgIHRoaXMudG9nZ2xlSG91cnNWaXNpYmxlKHRydWUsIHRoaXMuaXNNaWxpdGFyeUZvcm1hdCgpKTtcbiAgICAgICAgdGhpcy50b2dnbGVNaW51dGVzVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hvdXJzTGlbMF0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NsaWNrJykpO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXNMaVswXS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snKSk7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmNsb2NrTWlsaXRhcnlIb3Vyc0xpWzBdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjbGljaycpKTtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMubWVyaWRpZW1TcGFuc1swXS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkaXNwbGF5ZWQgdGltZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGZpbGwgaW5wdXQgdmFsdWUgb24gY29tcGxldGV0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaG91cnM6IEhvdXIgZGlzcGxheSB0aW1lLCBtaW51dGVzOiBNaW51dGUgZGlzcGxheSB0aW1lXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBzZXREaXNwbGF5VGltZSh7aG91cnMsIG1pbnV0ZXN9KSB7XG4gICAgICAgIGlmIChob3Vycykge1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheUhvdXJzLmlubmVySFRNTCA9IGhvdXJzLnRyaW0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtaW51dGVzKSB7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSBtaW51dGVzIDwgMTAgPyBgMCR7bWludXRlc31gIDogbWludXRlcztcblxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFbHMuZGlzcGxheU1pbnV0ZXMuaW5uZXJIVE1MID0gbWluLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgaGFuZCBlbGVtZW50IHRvIHNlbGVjdGVkIHRpbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbm9kZUluZGV4IEluZGV4IG9mIGFjdGl2ZSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtpbnRlZ2VyfSBpbmNyZW1lbnQgRGVncmVlIGluY3JlbWVudCBlbGVtZW50cyBhcmUgb25cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHJvdGF0ZUhhbmQobm9kZUluZGV4ID0gOSwgaW5jcmVtZW50ID0gMzApIHtcbiAgICAgICAgLy8gMCBpbmRleCBpcyAxODAgZGVncmVzcyBiZWhpbmQgMCBkZWdcbiAgICAgICAgY29uc3Qgcm90YXRlRGVnID0gbm9kZUluZGV4ICogaW5jcmVtZW50IC0gMTgwO1xuICAgICAgICBjb25zdCBzdHlsZVZhbCA9IGByb3RhdGUoJHtyb3RhdGVEZWd9ZGVnKWA7XG5cbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIYW5kLnN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlVmFsO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hhbmQuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzdHlsZVZhbDtcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIYW5kLnN0eWxlWyctbXMtdHJhbnNmb3JtJ10gPSBzdHlsZVZhbDtcbiAgICB9XG5cbiAgICBzaG93SG91cnMoKSB7XG4gICAgICAgIGNvbnN0IGlzTWlsaXRhcnlGb3JtYXQgPSB0aGlzLmlzTWlsaXRhcnlGb3JtYXQoKTtcbiAgICAgICAgY29uc3QgaG91ckVscyA9IGlzTWlsaXRhcnlGb3JtYXQgPyB0aGlzLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnNMaSA6IHRoaXMuY2FjaGVkRWxzLmNsb2NrSG91cnNMaTtcblxuICAgICAgICB0aGlzLnRvZ2dsZUhvdXJzVmlzaWJsZSh0cnVlLCBpc01pbGl0YXJ5Rm9ybWF0KTtcbiAgICAgICAgdGhpcy50b2dnbGVNaW51dGVzVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJvdGF0ZUhhbmQodGhpcy5nZXRBY3RpdmVJbmRleChob3VyRWxzKSk7XG4gICAgfVxuXG4gICAgc2hvd01pbnV0ZXMoKSB7XG4gICAgICAgIGNvbnN0IG1pbnV0ZUVscyA9IHRoaXMuY2FjaGVkRWxzLmNsb2NrTWludXRlc0xpO1xuXG4gICAgICAgIHRoaXMudG9nZ2xlSG91cnNWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTWludXRlc1Zpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMucm90YXRlSGFuZCh0aGlzLmdldEFjdGl2ZUluZGV4KG1pbnV0ZUVscyksIDYpO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hhbmQuc3R5bGUuaGVpZ2h0ID0gJzExNXB4JztcbiAgICB9XG5cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHRoaXMudGltZVNlbGVjdGVkKCk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBob3VyIChib3RoIG1pbGl0YXJ5IGFuZCBzdGFuZGFyZCkgY2xvY2sgdmlzaWJsaXR5IGluIERPTVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1Zpc2libGUgSXMgY2xvY2sgZmFjZSB0b2dnbGVkIHZpc2libGUgb3IgaGlkZGVuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc01pbGl0YXJ5Rm9ybWF0IElzIHVzaW5nIG1pbGl0YXJ5IGhvdXIgZm9ybWF0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0b2dnbGVIb3Vyc1Zpc2libGUoaXNWaXNpYmxlID0gZmFsc2UsIGlzTWlsaXRhcnlGb3JtYXQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja0hvdXJzLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgJiYgIWlzTWlsaXRhcnlGb3JtYXQgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbGl0YXJ5SG91cnMuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSAmJiBpc01pbGl0YXJ5Rm9ybWF0ID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuYnV0dG9uTmV4dC5zdHlsZS5kaXNwbGF5ID0gIWlzVmlzaWJsZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBtaW51dGUgY2xvY2sgdmlzaWJsaXR5IGluIERPTVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1Zpc2libGUgSXMgY2xvY2sgZmFjZSB0b2dnbGVkIHZpc2libGUgb3IgaGlkZGVuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0b2dnbGVNaW51dGVzVmlzaWJsZShpc1Zpc2libGUgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5jbG9ja01pbnV0ZXMuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbkJhY2suc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB0aGlzLmNhY2hlZEVscy5idXR0b25OZXh0LnN0eWxlLmRpc3BsYXkgPSAhaXNWaXNpYmxlID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIHRoaXMuY2FjaGVkRWxzLmJ1dHRvbkZpbmlzaC5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhY3RpdmUgdGltZSBlbGVtZW50IGluZGV4XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxDb2xsZWN0aW9ufSB0aW1lRWxzIENvbGxlY3Rpb24gb2YgdGltZSBlbGVtZW50cyB0byBmaW5kIGFjdGl2ZSBpblxuICAgICAqIEByZXR1cm4ge2ludGVnZXJ9IEFjdGl2ZSBlbGVtZW50IGluZGV4XG4gICAgICovXG4gICAgZ2V0QWN0aXZlSW5kZXgodGltZUVscykge1xuICAgICAgICBsZXQgYWN0aXZlSW5kZXggPSAwO1xuXG4gICAgICAgIFtdLnNvbWUuY2FsbCh0aW1lRWxzLCAodGltZUVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRpbWVFbC5jbGFzc0xpc3QuY29udGFpbnMoJ210cC1jbG9jay0tYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVJbmRleCA9IGluZGV4O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGFjdGl2ZUluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBzZWxlY3RlZCB0aW1lIHRvIGlucHV0IGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgdGltZVNlbGVjdGVkKCkge1xuICAgICAgICBjb25zdCBob3VycyA9IHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlIb3Vycy5pbm5lckhUTUw7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSB0aGlzLmNhY2hlZEVscy5kaXNwbGF5TWludXRlcy5pbm5lckhUTUw7XG4gICAgICAgIGNvbnN0IG1lcmlkaWVtID0gdGhpcy5pc01pbGl0YXJ5Rm9ybWF0KCkgPyAnJyA6IHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlNZXJpZGllbS5pbm5lckhUTUw7XG4gICAgICAgIGNvbnN0IHRpbWVWYWx1ZSA9IGAke2hvdXJzfToke21pbnV0ZXN9ICR7bWVyaWRpZW19YDtcblxuICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSB0aW1lVmFsdWUudHJpbSgpO1xuICAgICAgICB0aGlzLmlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBhY3RpdmUgY2xvY2sgZmFjZSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lckVsIE5ldyBhY3RpdmUgZWxlbWVudHMgLnBhcmVudE5vZGVcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGFjdGl2ZUVsIEVsZW1lbnQgdG8gc2V0IGFjdGl2ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgc2V0QWN0aXZlRWwoY29udGFpbmVyRWwsIGFjdGl2ZUVsKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNsYXNzTmFtZSA9ICdtdHAtY2xvY2stLWFjdGl2ZSc7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmUgPSBjb250YWluZXJFbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGFjdGl2ZUNsYXNzTmFtZSlbMF07XG5cbiAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgIGFjdGl2ZUVsLmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXJpZGllbSBzZWxlY3QgZXZlbnQgaGFuZGxlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVuZXR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lclxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgbWVyaWRpZW1TZWxlY3RFdmVudChldmVudCkge1xuICAgICAgICBjb25zdCBhY3RpdmVDbGFzc05hbWUgPSAnbXRwLWNsb2NrLS1hY3RpdmUnO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBjdXJyZW50QWN0aXZlID0gdGhpcy5jYWNoZWRFbHMubWVyaWRpZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhY3RpdmVDbGFzc05hbWUpWzBdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuXG4gICAgICAgIGlmICghY3VycmVudEFjdGl2ZS5pc0VxdWFsTm9kZShlbGVtZW50KSkge1xuICAgICAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzTmFtZSk7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3NOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRWxzLmRpc3BsYXlNZXJpZGllbS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhvdXIgc2VsZWN0IGV2ZW50IGhhbmRsZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lckVsIEVsZW1lbnQgY29udGFpbmluZyB0aW1lIGxpc3QgZWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge0hUTUxDb2xsZWN0aW9ufSBsaXN0RWxzIENvbGxlY3Rpb24gb2YgbGlzdCBlbGVtZW50c1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgaG91clNlbGVjdEV2ZW50KGV2ZW50LCBjb250YWluZXJFbCwgbGlzdEVscykge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCBuZXdBY3RpdmUgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHBhcmVudEVsID0gbmV3QWN0aXZlLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGlzSW5uZXIgPSBwYXJlbnRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ210cC1jbG9ja19faG91cnMtLWlubmVyJyk7XG5cbiAgICAgICAgdGhpcy5jYWNoZWRFbHMuY2xvY2tIYW5kLnN0eWxlLmhlaWdodCA9IGlzSW5uZXIgPyAnOTBweCcgOiAnMTA1cHgnO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUVsKGNvbnRhaW5lckVsLCBuZXdBY3RpdmUpO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5nZXRBY3RpdmVJbmRleChsaXN0RWxzKTtcblxuICAgICAgICB0aGlzLnNldERpc3BsYXlUaW1lKHtob3VyczogbmV3QWN0aXZlLmlubmVySFRNTH0pO1xuICAgICAgICB0aGlzLnJvdGF0ZUhhbmQoYWN0aXZlSW5kZXgpO1xuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdob3VyU2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIb3VyIHNlbGVjdCBldmVudCBoYW5kbGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBFdmVudCBvYmplY3QgcGFzc2VkIGZyb20gbGlzdGVuZXJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXJFbCBFbGVtZW50IGNvbnRhaW5pbmcgdGltZSBsaXN0IGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtIVE1MQ29sbGVjdGlvbn0gbGlzdEVscyBDb2xsZWN0aW9uIG9mIGxpc3QgZWxlbWVudHNcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIG1pbnV0ZVNlbGVjdEV2ZW50KGV2ZW50LCBjb250YWluZXJFbCwgbGlzdEVscykge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCBuZXdBY3RpdmUgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgdGhpcy5zZXRBY3RpdmVFbChjb250YWluZXJFbCwgbmV3QWN0aXZlKTtcblxuICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0QWN0aXZlSW5kZXgobGlzdEVscyk7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlUaW1lID0gYWN0aXZlSW5kZXg7XG5cbiAgICAgICAgdGhpcy5zZXREaXNwbGF5VGltZSh7bWludXRlczogZGlzcGxheVRpbWV9KTtcbiAgICAgICAgdGhpcy5yb3RhdGVIYW5kKGFjdGl2ZUluZGV4LCA2KTtcbiAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignbWludXRlU2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBwaWNrZXIgc2V0IHRvIG1pbGl0YXJ5IHRpbWUgbW9kZVxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgaW4gbWlsaXRhcnkgdGltZSBtb2RlXG4gICAgICovXG4gICAgaXNNaWxpdGFyeUZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pbnB1dEVsLm10cE9wdGlvbnMudGltZUZvcm1hdCA9PT0gJ21pbGl0YXJ5Jyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgcGlja2VyIG9iamVjdCBoYXMgYWxyZWFkeSBzZXQgZXZlbnRzIG9uIHBpY2tlciBlbGVtZW50c1xuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSGFzIGV2ZW50cyBiZWVuIHNldCBvbiBwaWNrZXIgZWxlbWVudHNcbiAgICAgKi9cbiAgICBoYXNTZXRFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEVscy53cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygnbXRwLWV2ZW50cy1zZXQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0ZW1wbGF0ZSBoYXMgYWxyZWFkeSBiZWVuIGFwcGVuZGVkIHRvIERPTVxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGVtcGxhdGUgaW4gRE9NXG4gICAgICovXG4gICAgaXNUZW1wbGF0ZUluRE9NKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtdHAtb3ZlcmxheScpWzBdKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbWVQaWNrZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvdGltZXBpY2tlci5qcyIsImNvbnN0IHRlbXBsYXRlID0gYFxuPGRpdiBjbGFzcz1cIm10cC1vdmVybGF5XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj5cbiAgICA8ZGl2IGNsYXNzPVwibXRwLXdyYXBwZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm10cC1kaXNwbGF5XCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm10cC1kaXNwbGF5X19ob3Vyc1wiPjEyPC9zcGFuPjpcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXRwLWRpc3BsYXlfX21pbnV0ZXNcIj4wMDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXRwLWRpc3BsYXlfX21lcmlkaWVtXCI+YW08L3NwYW4+XG4gICAgICAgIDwvZGl2PjwhLS0gRU5EIC5tdHAtZGlzcGxheSAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm10cC1waWNrZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdHAtbWVyaWRpZW1cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm10cC1jbG9jay0tYWN0aXZlXCI+YW08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4+cG08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj48IS0tIEVORCAubXRwLW1lcmlkaWVtIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10cC1jbG9ja1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdHAtY2xvY2tfX2NlbnRlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdHAtY2xvY2tfX2hhbmRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtdHAtY2xvY2tfX3RpbWUgbXRwLWNsb2NrX19vdXRlciBtdHAtY2xvY2tfX2hvdXJzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibXRwLWNsb2NrLS1hY3RpdmVcIj4xMjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4xPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPjI8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+MzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT40PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPjU8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+NjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT43PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPjg8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+OTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4xMDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4xMTwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtdHAtY2xvY2tfX3RpbWUgbXRwLWNsb2NrX19vdXRlciBtdHAtY2xvY2tfX21pbnV0ZXNcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJtdHAtY2xvY2stLWFjdGl2ZVwiPjA8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+Jm1pZGRvdDs8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+NTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4xMDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4xNTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4yMDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4yNTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4zMDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4zNTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT40MDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT40NTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT41MDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT41NTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT4mbWlkZG90OzwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtdHAtY2xvY2tfX3RpbWUgbXRwLWNsb2NrX19ob3Vycy1taWxpdGFyeVwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdHAtY2xvY2tfX2hvdXJzLS1pbm5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibXRwLWNsb2NrLS1hY3RpdmVcIj4wMDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTM8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjE0PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xNTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTY8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjE3PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xODwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTk8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjIwPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4yMTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MjI8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjIzPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdHAtY2xvY2tfX2hvdXJzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+MTI8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjE8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjI8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjM8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjQ8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjU8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjY8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjc8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjg8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjk8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjEwPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xMTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2Rpdj48IS0tIEVORCAubXRwLWNsb2NrIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10cC1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtdHAtYWN0aW9uc19fYnV0dG9uIG10cC1hY3Rpb25zX19jYW5jZWxcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm10cC1hY3Rpb25zX19idXR0b24gbXRwLWFjdGlvbnNfX2JhY2tcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPkJhY2s8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm10cC1hY3Rpb25zX19idXR0b24gbXRwLWFjdGlvbnNfX25leHRcIj5OZXh0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtdHAtYWN0aW9uc19fYnV0dG9uIG10cC1hY3Rpb25zX19maW5pc2hcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPkRvbmU8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PjwhLS0gRU5EIC5tdHAtYWN0aW9ucyAtLT5cbiAgICAgICAgPC9kaXY+PCEtLSBFTkQgLm10cC1waWNrZXIgLS0+XG4gICAgPC9kaXY+PCEtLSBFTkQgLm10cC13cmFwcGVyIC0tPlxuPC9kaXY+PCEtLSBFTkQgLm10cC1vdmVybGF5IC0tPlxuYDtcblxuZXhwb3J0IGRlZmF1bHQgdGVtcGxhdGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvdGVtcGxhdGUuanMiLCIvKipcbiAqIE9iamVjdC5hc3NpZ24gcG9seWZpbGxcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gdGFyZ2V0IFRhcmdldCBvYmplY3QgdG8gbWVyZ2UgcHJvcGVydGllcyBvbnRvXG4gKiBAcGFyYW0gey4uLm9iamVjdH0gc291cmNlcyAgU291cmNlIG9iamVjdCB0byBtZXJnZSBwcm9wZXJ0aWVzIGZyb21cbiAqIEByZXR1cm4ge29iamVjdH0gVGFyZ2V0IG9iamVjdCB3aXRoIG1lcmdlZCBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIC4uLnNvdXJjZXMpIHtcbiAgICBpZiAodGFyZ2V0ID09PSAndW5kZWZpbmVkJyB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgZmlyc3QgYXJndW1lbnQgdG8gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgdG8gPSBPYmplY3QodGFyZ2V0KTtcblxuICAgIGZvciAobGV0IGluYyA9IDA7IGluYyA8IHNvdXJjZXMubGVuZ3RoOyBpbmMgKz0gMSkge1xuICAgICAgICBsZXQgbmV4dFNvdXJjZSA9IHNvdXJjZXNbaW5jXTtcblxuICAgICAgICBpZiAobmV4dFNvdXJjZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmV4dFNvdXJjZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0U291cmNlID0gT2JqZWN0KG5leHRTb3VyY2UpO1xuXG4gICAgICAgIGNvbnN0IGtleXNBcnJheSA9IE9iamVjdC5rZXlzKG5leHRTb3VyY2UpO1xuXG4gICAgICAgIGZvciAobGV0IG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4ICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRLZXkgPSBrZXlzQXJyYXlbbmV4dEluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5leHRTb3VyY2UsIG5leHRLZXkpO1xuXG4gICAgICAgICAgICBpZiAoZGVzYyAhPT0gJ3VuZGVmaW5lZCcgJiYgZGVzYy5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3NpZ247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvYXNzaWduLmpzIiwiXG4vKipcbiAqIEBjbGFzcyBFdmVudHNcbiAqXG4gKiBAcHJvcCB7b2JqZWN0fSBldmVudHMgLSBIYXNoIHRhYmxlIG9mIGV2ZW50cyBhbmQgdGhlaXIgYXNzaWduZWQgaGFuZGxlciBjYWxsYmFja3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRzIHtcbiAgICBldmVudHMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIFNldCBoYW5kbGVyIG9uIGV2ZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lIHRvIHNldCBoYW5kbGVyIHRvXG4gICAgICogQHBhcmFtIHtmdW5jfSBoYW5kbGVyIC0gSGFuZGxlciBmdW5jdGlvbiBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVyIGZvciB0aGUgZ2l2ZW4gZXZlbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWUgdG8gcmVtb3ZlIGhhbmRsZXIgZnJvbVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgb2ZmKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBldmVudCB3aXRoIHBhcmFtc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdG8gdHJpZ2dlclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgLSBQYXJhbWV0ZXJzIHRvIHBhc3MgdG8gZXZlbnQgaGFuZGxlclxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgdHJpZ2dlcihldmVudCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tldmVudF0gJiYgdGhpcy5ldmVudHNbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKHBhcmFtcykpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL2V2ZW50cy5qcyJdLCJzb3VyY2VSb290IjoiIn0=